function hideFooterAndHeader(callbackClose,callbackOpen,attachClose,attachOpen){attachClose=typeof attachClose==="undefined"?"":attachClose;attachOpen=typeof attachOpen==="undefined"?"":attachOpen;var $body=showHideGeneralElements();var delay=500;var noTouchScreen=$("html").hasClass("no-touchscreen");var mouseOverEvent=noTouchScreen?"mouseover":"touchstart";var clickEvent=noTouchScreen?"click":"touchend";if(attachClose!=""&&attachOpen!=""){$(attachClose).on(mouseOverEvent,function(e){if($("#fake_header_show").length<=0&&noTouchScreen){$body.prepend("<div id='fake_header_show' class='fake_header_full_screen'></div>");$("#fake_header_show").slideDown(delay)}if($("#fake_footer_show").length<=0&&noTouchScreen){$body.prepend("<div id='fake_footer_show' class='fake_footer_full_screen'></div>");$("#fake_footer_show").slideDown(delay)}}).on("mouseout",function(){var $fakeHeader=$("#fake_header_show");var $fakeFooter=$("#fake_footer_show");if($fakeHeader.length>0&&noTouchScreen){$fakeHeader.slideUp(delay,function(){$fakeHeader.remove()})}if($fakeFooter.length>0&&noTouchScreen){$fakeFooter.slideUp(delay,function(){$fakeFooter.remove()})}}).on(clickEvent,function(){showHideGeneralElements(1);callbackClose&&callbackClose();return false});$(attachOpen).on(clickEvent,function(){hideFooterAndHeader(callbackClose,callbackOpen,attachClose,attachOpen);callbackOpen&&callbackOpen()})}}function showHideGeneralElements(action){action=typeof action==="undefined"||action==0?0:1;var elements=[".top-bar",".puzzle-header","footer.puzzle-footer",".b-lesson-plan__wrapper",".puzzle-banner__wrapper",".header-notify"];for(var i=0;i<elements.length;i++){if(!action)$(elements[i]).hide();else $(elements[i]).show()}var $body=$("body");if(!action)$body.attr("style","margin-top: 0 !important");else $body.attr("style","");return $body}$(function(){var slide=$(".j-slide");var button=$(".button");var $slider=$(".b-slider");var $reviewSlider=$("#review-slider");if($slider.length&&$slider.superslides!=undefined){$slider.superslides({animation:"slide",play:0,pagination:false,inherit_width_from:".n-block__10 .b-slider"});var $current_slide=$(".b-slider .b-slide__item:first");var update=function(speed){speed=!isNaN(speed)?speed:0;setTimeout(function(){var h=$current_slide.height("auto").height();if(h<$current_slide[0].scrollHeight)h=$current_slide[0].scrollHeight;if($(window).width()<680)h+=100;$reviewSlider.animate({height:h},speed)},100)};$reviewSlider.on("animating.slides",function(e,orientation){var self=this;$current_slide=$(".b-slide__item",this).eq(orientation.upcoming_slide);update(300)});setTimeout(update,700);$(window).resize(update)}if($("html").hasClass("mobile")){$(".b-teacher_block__name").click(function(e){if(!$(this).hasClass("is-open")){e.preventDefault();$(this).addClass("is-open")}})}$(".b-footer-menu .title a").click(function(e){if($(this).closest("li").find("ul:visible").length==0){e.preventDefault()}else{e.stopPropagation()}});$(".b-footer-menu .title").click(function(e){if(!$(this).hasClass("item-open")){$(".b-footer-menu .title").removeClass("item-open");$(".b-footer-menu .title").next("ul").slideUp();$(this).addClass("item-open");$(this).next("ul").slideDown()}else{$(".b-footer-menu .title").removeClass("item-open");$(".b-footer-menu .title").next("ul").slideUp()}});$(".b-level__item").on("touchstart",function(){$(".b-level__item").removeClass("level-select");$(this).addClass("level-select")});$("body").on("click",".j-modal__video",function(){new eno_youtube_modal($(this).data("youtube-id"));return false});$("#howto_video_link, #howto_video_button, #series_video_link, #series_video_button, #listening_video_link, #listening_video_button, #translates_video_link, #translates_video_button, #videopuzzle-how-to, #exercise-how-to, #listening-how-to, #pieces-how-to, #prices-page-phrases, #prices-page-dict, #prices-page-movies, .prices-page__video-info__content__video, .pe-tarif__newyear-popup-video, #welcomeTeacher, #videodict-how-to, #bagaj-slov , #ny2018").click(function(){var youtube_id=$(this).data("youtube-id");new eno_youtube_modal(youtube_id);return false});var $mobileslider=$(".mobile-slider");if($mobileslider.length){$mobileslider.slick({infinite:true,speed:200,fade:true,autoplay:true,slide:"div",cssEase:"linear"})}var $slides=$(".j-slide"),$items=$(".j-item"),data={colors:[],offsets:[],heights:[]},activeItem=0;var refresh=function(){$slides.each(function(index,el){data.colors[index]=$(el).data("color");data.offsets[index]=$(el).offset().top;data.heights[index]=$(el).outerHeight()})};var check=function($item,index){var itemOffset=Math.round($item.offset().top+$item.outerHeight()/2);for(var i=0;i<data.offsets.length;i++){if(itemOffset>=data.offsets[i]&&itemOffset<=data.offsets[i]+data.heights[i]){color=data.colors[i];if(color){$item.addClass("m-menu__item-light")}else{$item.removeClass("m-menu__item-light")}if(index==activeItem){$items.removeClass("m-menu__item-active");$('.j-item[data-target="'+i+'"]').addClass("m-menu__item-active");activeItem=i}}}};$(window).on("scroll",function(){refresh();$items.each(function(index,el){check($(el),index)})}).trigger("scroll");$(".j-show_user_menu").on("click",function(e){if(!$(e.target).hasClass("logOut")){e.stopPropagation();$("#header_search").removeClass("active");$(".header-menu-open").removeClass("header-menu-open");$(".pe_heder-menu").find(".sub-menu").slideUp(100);$(".j-user_menu").stop().slideToggle(100);if($(".drop-menu__mobile__main").is(":visible")){$(".drop-menu__mobile__main").removeClass("is-open")}$(this).toggleClass("opened")}});$(".j-show_phraze_counter_info").on("click",function(){var $firstBlock=$(".j-first_block"),$phraze_counter_info=$(".j-phraze_counter_info");$phraze_counter_info.slideToggle()});$(".j-phraze_counter_info__close").on("click",function(){var $firstBlock=$(".j-first_block"),$phraze_counter_info=$(".j-phraze_counter_info");if($firstBlock.length){$phraze_counter_info.css("margin-top","0px");$firstBlock.removeClass("m-first_block-top")}$phraze_counter_info.stop().slideUp()});$(".j-phraze_counter_footer__close").on("click",function(){$(".j-phraze_counter_footer").slideUp()});$("a.b-phraze_counter_info__link").click(function(){$(this).parents(".j-phraze_counter_info").slideUp();$.post("/",{ajax_action:"ajax_close_hint",service:"info25"})});var isMovieSliderInit=false,$frame=$("#cyclepages"),$wrap=$frame.parent(),sly;if(typeof Sly!=="undefined"){sly=new Sly("#cyclepages",{horizontal:1,itemNav:"basic",smart:0,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBy:1,pagesBar:$wrap.find(".pages"),activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1})}function initMovieslider(){var $serialSlider=$(".j-list-serials");if($serialSlider.length){$serialSlider.removeClass("b-list-serials").addClass("b-slide_list_serials");$(".j-serials").addClass("m-serials-slider");sly.init();isMovieSliderInit=true}}function destroyMovieslider(){var $serialSlider=$(".j-list-serials");if($serialSlider.length&&isMovieSliderInit){$serialSlider.removeClass("b-slide_list_serials").addClass("b-list-serials");$(".j-serials").removeClass("m-serials-slider");$frame.sly(false);isMovieSliderInit=false}}if(typeof sly!=="undefined"){if($(window).width()<=768&&!isMovieSliderInit){initMovieslider()}else if($(window).width()>768&&isMovieSliderInit){destroyMovieslider()}}$(window).resize(function(){if(typeof sly!=="undefined"){if($(window).width()<=768&&!isMovieSliderInit){initMovieslider()}else if($(window).width()>768&&isMovieSliderInit){destroyMovieslider()}}var $scale=$(".j-scale_value");if($scale.length){setScaleProgressValue(parseFloat($scale.html()))}});function userMenuPositioning(){if($(".j-user_menu").length){var $userMenu=$(".j-user_menu"),freePlace=$(window).width()-$(".j-show_user_menu").offset().left,menuWidth=$userMenu.width();if(freePlace-menuWidth<=0){$userMenu.css("margin-left",freePlace-menuWidth+"px")}else{$userMenu.css("margin-left","0px")}}}$(window).resize(function(){userMenuPositioning()});userMenuPositioning();$(".j-users_word").on("input",function(){var self=$(this);if(self.val()===""){self.removeClass("m-valentins_action__quiz_inp-typed")}else{self.addClass("m-valentins_action__quiz_inp-typed")}});function close_hint_callback(e){e.stopPropagation();e.preventDefault();var service=$(this).closest(".j-instruction_hide").remove().data("service");$.post("/",{ajax_action:"ajax_close_hint",service:service})}$(".j-instruction_close").on("click",close_hint_callback);$(document.body).on("click",".j-instruction_close",close_hint_callback)});function eno_youtube_modal(youtube_id){var w=1280,h=720,padding=10;this.close=function(){$("#eno_youtube_modal").fadeOut(100,function(){$(this).remove()});$("body").css("overflow","visible")};this.close();var close_icon=svg_icons.close2.cloneNode(true);close_icon.onclick=this.close;$("body").css("overflow","hidden");var $modal=$('<div id="eno_youtube_modal"/>').append(close_icon).appendTo("body");var $frame_wrap=$('<div class="frame_wrap"/>').appendTo($modal).html('<iframe src="//www.youtube.com/embed/'+youtube_id+'?rel=0&showinfo=0&autoplay=1" allowfullscreen/>');function updatepos(){var css={};var ww=$(window).width();var wh=window.innerHeight>$(window).height()?window.innerHeight:$(window).height();var wpad=ww/100*padding;var hpad=wh/100*padding;var wwp=ww-wpad*2;var whp=wh-hpad*2;css.height=whp<=h?whp:h;css.width=css.height*w/h;if(css.width>=wwp){css.width=wwp;css.height=css.width*h/w}css.top=whp<=css.height?hpad:wh/2-css.height/2;css.left=wwp<=css.width?wpad:ww/2-css.width/2;if(css.width+93>=wwp&&css.height+93>=whp){css.height=whp-94;css.width=css.height*w/h;css.top=wh/2-css.height/2;css.left=ww/2-css.width/2}var cy=css.top-37;var cx=css.left+css.width+5;if(css.width+93>=ww){cy=css.top-46;cx=css.left+css.width-38}if(css.height+93>=wh){cy=css.top-46;cx=css.left+css.width-38}if(cy<5&&css.width+93<ww){cy=css.top+6;cx=css.left+css.width+14}$frame_wrap.css(css);close_icon.style.top=cy+"px";close_icon.style.left=cx+"px"}updatepos();$(window).resize(updatepos)}function setScaleProgressValue(percent){var $scale=$(".j-scale"),$scaleStep=$(".j-scale_step"),$scaleProgress=$(".j-scale_progress"),progressWidth=$scale.width()*percent/100,stepWidth=$scale.width()*20/100,maxLeftIndent=0;$scaleStep.each(function(i){var $self=$(this),$progressWraps=$self.find(".j-scale_progress").parent();$progressWraps.each(function(){var $this=$(this),leftIndent=$this.width()/2,position=Math.abs(parseFloat($self.css("left")));if(leftIndent>maxLeftIndent){maxLeftIndent=leftIndent}if(position<=progressWidth){$self.addClass("m-scale_step-reached");if(i>0){$this.find(".j-scale_progress").css("left",(stepWidth*i-leftIndent)*-1)}}})});$scaleProgress.css("width",progressWidth+maxLeftIndent);$($scaleProgress[0]).css("width",progressWidth);$(".j-scale_value").html(percent)}$(document).ready(function(){var $submenu=$(".submenu-style1");$submenu.on("click",function(){if($(this).hasClass("active")){$(this).removeClass("active");$(this).next("ul").removeClass("open")}else{$submenu.removeClass("active");$submenu.next("ul").removeClass("open");$(this).addClass("active");$(this).next("ul").addClass("open")}return false});if($submenu.length>0){$("body").on("click",function(){$submenu.removeClass("active").next("ul").removeClass("open")})}});$(document).ready(function(){$(".puzzle-footer__menu-mobile").on("click",function(){$(this).toggleClass("is-open");$(".puzzle-footer__menu-content").slideToggle(400)});$("#welcomeIntroYes").on("click",function(){cookie.set("welcome",1,30);dataSend(0);window.location.href="/welcome"});$("#welcomeIntroNo").on("click",function(){$(this).closest(".puzzle-welcome__intro").css("display","none");cookie.set("welcome",0,30);dataSend(1)});function dataSend(type){$.ajax({type:"POST",url:"/",data:{ajax_action:"ajax_welcome",type:type}})}});